./gen_init_data --train_file=./sift1B/sift_learn.bvecs --n=20000000 --use_yael=true --iter_num=60 --thread_num=50 --d=128 --k=2048 --coarse_centriods_file=sift1B/gnoimi_train_data/coarse_centroids_init_d128_k2048_residual_opq_yael.fvecs --residual_centriods_file=sift1B/gnoimi_train_data/fine_centroids_init_d128_k2048_residual_opq_yael.fvecs &>log.init.yael.k2048_residual_opq.sift1b &

#train a
./learnGNOIMI --n=0 -train_lopq=false --train_opq=true --direct_train_s_t_alpha=true --train_pq=true --pq_minus_mean=true --thread_num=56 --k=2048 --learnIterationsCount=40 --outputFilesPrefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_ --pqOutputFilesPrefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_minus_mu_ --initCoarseFilename=sift1B/gnoimi_train_data/coarse_centroids_init_d128_k2048_residual_opq_yael.fvecs --initFineFilename=sift1B/gnoimi_train_data/fine_centroids_init_d128_k2048_residual_opq_yael.fvecs   --learnFilename=./sift1B/sift_learn.bvecs --lpq_file_prefix=sift1B/lpq_k2048_minus/ &>log.learn_yael_opq_k2048_residual_opq.sift1B_gopq_minus_mu

#train lopq
./learnGNOIMI --n=0 -train_lopq=true --train_opq=false --direct_train_s_t_alpha=false --train_pq=false --pq_minus_mean=true --thread_num=56 --k=2048 --learnIterationsCount=60 --outputFilesPrefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_ --pqOutputFilesPrefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_minus_mu_ --initCoarseFilename=sift1B/gnoimi_train_data/coarse_centroids_init_d128_k2048_residual_opq_yael.fvecs     --initFineFilename=sift1B/gnoimi_train_data/fine_centroids_init_d128_k2048_residual_opq_yael.fvecs   --learnFilename=./sift1B/sift_learn.bvecs --lpq_file_prefix=sift1B/lpq_k2048_minus/  -lopq_train_coarse_start=1536   -lopq_train_coarse_end=2048 &>log.learn_yael_opq_k2048_residual_opq.sift1B_lopq_minus_mu_1536_2048

#index lopq
./search_GNOIMI_deco -threadsCount=1 --pq_minus_mean=true --K=2048 --residual_opq=true --lpq_file_prefix=sift1B/lpq_k2048_minus/--pq_prefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_minus_mu_ --model_prefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_ --index_prefix=./sift1B/lpq_k2048_minus/index_k2048_0.5b_residual_opq_lopq_lpq_minus_decom_ --query_filename=./sift1B/sift_query.bvecs --base_file=./sift1B/sift_base.bvecs --groud_truth_file=sift1B/sift_groundtruth.ivecs --N=0  --queriesCount=10000 --nprobe=2000 --neighborsCount=100000 --L=32 --make_index=true

#search lopq
./search_GNOIMI_deco -threadsCount=1 --pq_minus_mean=true --K=2048 --residual_opq=true --lpq_file_prefix=sift1B/lpq_k2048_minus/--pq_prefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_minus_mu_ --model_prefix=sift1B/lpq_k2048_minus/learn_from_yael_k2048_residual_opq_   --index_prefix=./sift1B/lpq_k2048_minus/index_k2048_0.5b_residual_opq_lopq_lpq_minus_decom_ --query_filename=./sift1B/sift_query.bvecs --base_file=./sift1B/sift_base.bvecs --groud_truth_file=sift1B/sift_groundtruth.ivecs --N=0  --queriesCount=10000 --nprobe=2000 --neighborsCount=100000 --L=32 --make_index=false
